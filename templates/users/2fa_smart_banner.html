<!-- 2FA Suggestion Banner - No Server Changes Required -->
<!-- Add this to any user template where you want to show the suggestion -->

{% if user.is_authenticated and not user.is_2fa_enabled %}
<div id="twofa-suggestion-banner" class="alert alert-info alert-dismissible fade show" role="alert" style="margin: 15px 0; border-left: 4px solid #17a2b8;">
    <div class="d-flex align-items-center">
        <div class="mr-3">
            <i class="fas fa-shield-alt fa-2x text-info"></i>
        </div>
        <div class="flex-grow-1">
            <h6 class="alert-heading mb-1">
                <i class="fas fa-star text-warning"></i>
                Enhance Your Account Security
            </h6>
            <p class="mb-2">
                Two-Factor Authentication is now available! Add an extra layer of protection to your account with just a few clicks.
            </p>
            <small class="text-muted">
                <i class="fas fa-clock"></i> Takes less than 2 minutes to set up
                <span class="ml-3"><i class="fas fa-mobile-alt"></i> Works with Google Authenticator</span>
            </small>
        </div>
        <div class="ml-3">
            <a href="{% url 'users:2fa_setup' %}" class="btn btn-success btn-sm mb-1">
                <i class="fas fa-plus"></i> Enable 2FA
            </a>
            <br>
            <button type="button" class="btn btn-outline-secondary btn-sm" onclick="dismiss2FABanner()">
                Maybe Later
            </button>
        </div>
    </div>
    <button type="button" class="close" onclick="dismiss2FABanner()" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>

<script>
// Smart dismissal - remembers user choice for 30 days
function dismiss2FABanner() {
    document.getElementById('twofa-suggestion-banner').style.display = 'none';
    
    // Remember dismissal for 30 days (client-side only)
    const dismissalDate = new Date();
    dismissalDate.setDate(dismissalDate.getDate() + 30);
    localStorage.setItem('twofa_banner_dismissed', dismissalDate.toISOString());
}

// Check if banner should be shown (client-side logic)
document.addEventListener('DOMContentLoaded', function() {
    const banner = document.getElementById('twofa-suggestion-banner');
    if (banner) {
        const dismissedUntil = localStorage.getItem('twofa_banner_dismissed');
        
        if (dismissedUntil) {
            const dismissedDate = new Date(dismissedUntil);
            const now = new Date();
            
            if (now < dismissedDate) {
                // Still within dismissal period
                banner.style.display = 'none';
            }
        }
        
        // Show banner with slide-down animation
        banner.style.opacity = '0';
        banner.style.transform = 'translateY(-20px)';
        banner.style.transition = 'all 0.5s ease-out';
        
        setTimeout(() => {
            banner.style.opacity = '1';
            banner.style.transform = 'translateY(0)';
        }, 100);
    }
});
</script>
{% endif %}
