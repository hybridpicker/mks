{% comment %}
    2FA Suggestion Banner - Include Version
    Usage: {% include 'includes/2fa_banner.html' %}
    
    This will automatically show the 2FA suggestion to users who:
    - Are logged in
    - Don't have 2FA enabled yet
    - Haven't dismissed it recently
{% endcomment %}

{% if user.is_authenticated and not user.is_2fa_enabled %}
<div id="2fa-banner" class="alert alert-info alert-dismissible fade show" role="alert" style="margin: 15px 0; border-left: 4px solid #007bff;">
    <div class="d-flex align-items-center">
        <div class="flex-shrink-0 mr-3">
            <i class="fas fa-shield-alt fa-lg text-primary"></i>
        </div>
        <div class="flex-grow-1">
            <h6 class="alert-heading mb-1">
                <strong>Enhanced Security Available</strong>
            </h6>
            <p class="mb-1">
                Two-Factor Authentication adds an extra layer of protection to your account.
            </p>
            <small class="text-muted">
                <i class="fas fa-clock"></i> Setup takes 2 minutes
                <span class="ml-2"><i class="fas fa-mobile-alt"></i> Works with Google Authenticator</span>
            </small>
        </div>
        <div class="flex-shrink-0 ml-3">
            <a href="{% url 'users:2fa_setup' %}" class="btn btn-primary btn-sm">
                <i class="fas fa-plus"></i> Enable 2FA
            </a>
        </div>
    </div>
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>

<!-- Auto-hide after 30 seconds if user doesn't interact -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const banner = document.getElementById('2fa-banner');
    if (banner) {
        // Auto-hide after 30 seconds
        setTimeout(function() {
            if (banner.style.display !== 'none') {
                banner.style.opacity = '0.5';
            }
        }, 30000);
        
        // Re-show on hover
        banner.addEventListener('mouseenter', function() {
            banner.style.opacity = '1';
        });
    }
});
</script>
{% endif %}
