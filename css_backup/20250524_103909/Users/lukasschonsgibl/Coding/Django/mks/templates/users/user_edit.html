{% extends "templates/base.html" %}
{% load static %}

{% block tab_id %}id="user_edit_tab"{% endblock %}

{% block extra_head %}
<meta name="robots" content="noindex">
<style>
.form-container { padding: 2rem 0; background: #fdfdfd; min-height: 80vh; }
.form-hero { background: #f8f9fa; border-bottom: 3px solid #D11317; padding: 2rem; text-align: center; }
.form-title { font-family: "jaf-bernina-sans-condensed", sans-serif; font-size: 2.2rem; font-weight: 800; color: #D11317; margin-bottom: 0.5rem; }
.form-subtitle { font-family: "jaf-bernina-sans-condensed", sans-serif; font-size: 1rem; color: #666; font-weight: 500; }
.form-card { background: white; border: 1px solid #e0e0e0; border-radius: 12px; padding: 2rem; margin: 2rem auto; max-width: 600px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
.form-group { margin-bottom: 1.5rem; }
.form-label { display: block; font-weight: 600; color: #333; margin-bottom: 0.5rem; font-size: 0.95rem; }
.form-control { width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: 6px; font-size: 0.95rem; transition: border-color 0.3s ease; }
.form-control:focus { outline: none; border-color: #D11317; box-shadow: 0 0 0 2px rgba(209, 19, 23, 0.1); }
.form-select { width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: 6px; font-size: 0.95rem; background: white; }
.checkbox-group { display: flex; align-items: center; gap: 0.5rem; margin-top: 0.5rem; }
.checkbox-group input[type="checkbox"] { width: 18px; height: 18px; accent-color: #D11317; }
.checkbox-group label { font-size: 0.9rem; color: #555; margin: 0; cursor: pointer; }
.form-actions { display: flex; gap: 1rem; justify-content: flex-end; margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid #e0e0e0; }
.btn { padding: 0.8rem 1.5rem; border: none; border-radius: 6px; font-weight: 600; font-size: 0.95rem; cursor: pointer; transition: all 0.3s ease; text-decoration: none; display: inline-flex; align-items: center; gap: 0.5rem; }
.btn-primary { background: #D11317; color: white; }
.btn-primary:hover { background: #b10e13; color: white; text-decoration: none; }
.btn-secondary { background: #6c757d; color: white; }
.btn-secondary:hover { background: #545b62; color: white; text-decoration: none; }
.alert { padding: 1rem; border-radius: 6px; margin-bottom: 1rem; }
.alert-success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
.alert-error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
@media (max-width: 768px) { .form-container { padding: 1rem 0; } .form-card { margin: 1rem; padding: 1.5rem; } .form-actions { flex-direction: column; } }
</style>
{% endblock %}

{% block navbar %}{% endblock %}

{% block body %}
<div class="mbs">
  <div class="form-container">
    <div class="form-hero">
      <h1 class="form-title">Benutzer bearbeiten</h1>
      <p class="form-subtitle">{{ user.get_full_name|default:user.username }}</p>
    </div>

    <div class="form-card">
      {% if messages %}
        {% for message in messages %}
          <div class="alert alert-{{ message.tags }}">{{ message }}</div>
        {% endfor %}
      {% endif %}

      <form method="post">
        {% csrf_token %}
        
        <div class="form-group">
          <label class="form-label" for="{{ form.first_name.id_for_label }}">{{ form.first_name.label }}</label>
          {{ form.first_name }}
        </div>

        <div class="form-group">
          <label class="form-label" for="{{ form.last_name.id_for_label }}">{{ form.last_name.label }}</label>
          {{ form.last_name }}
        </div>

        <div class="form-group">
          <label class="form-label" for="{{ form.email.id_for_label }}">{{ form.email.label }}</label>
          {{ form.email }}
        </div>

        <div class="form-group">
          <label class="form-label" for="{{ form.username.id_for_label }}">{{ form.username.label }}</label>
          {{ form.username }}
        </div>

        <div class="form-group">
          <label class="form-label" for="{{ form.user_role.id_for_label }}">{{ form.user_role.label }}</label>
          {{ form.user_role }}
        </div>

        <div class="form-group">
          <div class="checkbox-group">
            {{ form.is_active }}
            <label for="{{ form.is_active.id_for_label }}">{{ form.is_active.label }}</label>
          </div>
        </div>

        <div class="form-group">
          <div class="checkbox-group">
            {{ form.is_staff }}
            <label for="{{ form.is_staff.id_for_label }}">{{ form.is_staff.label }}</label>
          </div>
        </div>

        <div class="form-group">
          <div class="checkbox-group">
            {{ form.coordinator }}
            <label for="{{ form.coordinator.id_for_label }}">{{ form.coordinator.label }}</label>
          </div>
        </div>

        <div class="form-actions">
          <a href="{% url 'users:user_management' %}" class="btn btn-secondary">Abbrechen</a>
          <button type="submit" class="btn btn-primary">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M20 6L9 17L4 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Speichern
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}

{% block footer %}{% endblock %}