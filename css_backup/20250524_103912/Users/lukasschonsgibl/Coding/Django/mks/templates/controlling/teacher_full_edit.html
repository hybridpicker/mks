        <form method="post" id="teacher-form" class="mks-form">
            {% csrf_token %}
            
            <!-- Personal Information -->
            <div class="mks-section">
                <h3 class="mks-section-title">
                    <svg class="mks-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    Persönliche Daten
                </h3>
                
                <div class="mks-form-group">
                    <label class="mks-label" for="first_name">
                        Vorname <span class="mks-required">*</span>
                    </label>
                    <input type="text" name="first_name" id="first_name" class="mks-input" value="{{ teacher.first_name }}" required>
                </div>
                
                <div class="mks-form-group">
                    <label class="mks-label" for="last_name">
                        Nachname <span class="mks-required">*</span>
                    </label>
                    <input type="text" name="last_name" id="last_name" class="mks-input" value="{{ teacher.last_name }}" required>
                </div>
                
                <div class="mks-form-group">
                    <label class="mks-label" for="academic_title">Akademischer Titel</label>
                    <select name="academic_title" id="academic_title" class="mks-select">
                        <option value="">Kein Titel</option>
                        {% for title in academic_titles %}
                        <option value="{{ title.id }}" {% if teacher.academic_title.id == title.id %}selected{% endif %}>
                            {{ title.title }}
                        </option>
                        {% endfor %}
                    </select>
                </div>
                
                <div class="mks-form-group">
                    <label class="mks-label" for="gender">Geschlecht</label>
                    <select name="gender" id="gender" class="mks-select">
                        {% for gender in genders %}
                        <option value="{{ gender.id }}" {% if teacher.gender.id == gender.id %}selected{% endif %}>
                            {{ gender.gender }}
                        </option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            
            <!-- Contact Information -->
            <div class="mks-section">
                <h3 class="mks-section-title">
                    <svg class="mks-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                        <polyline points="22,6 12,13 2,6"></polyline>
                    </svg>
                    Kontaktdaten
                </h3>
                
                <div class="mks-form-group">
                    <label class="mks-label" for="email">E-Mail</label>
                    <input type="email" name="email" id="email" class="mks-input" value="{{ teacher.email }}">
                    <div class="mks-hint">Interne Kommunikation</div>
                </div>
                
                <div class="mks-form-group">
                    <label class="mks-label" for="phone">Telefon</label>
                    <input type="text" name="phone" id="phone" class="mks-input" value="{{ teacher.phone }}">
                    <div class="mks-hint">Format: +43 2742 333-5555</div>
                </div>
                
                <div class="mks-form-group">
                    <label class="mks-label" for="homepage">Website</label>
                    <input type="url" name="homepage" id="homepage" class="mks-input" value="{{ teacher.homepage }}">
                    <div class="mks-hint">Persönliche Website oder Portfolio</div>
                </div>
            </div>
            
            <!-- Address -->
            <div class="mks-section">
                <h3 class="mks-section-title">
                    <svg class="mks-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                        <circle cx="12" cy="10" r="3"></circle>
                    </svg>
                    Adresse
                </h3>
                
                <div class="mks-form-group">
                    <label class="mks-label" for="adress_line">Straße</label>
                    <input type="text" name="adress_line" id="adress_line" class="mks-input" value="{{ teacher.adress_line }}">
                </div>
                
                <div class="mks-form-group">
                    <label class="mks-label" for="house_number">Hausnummer</label>
                    <input type="text" name="house_number" id="house_number" class="mks-input" value="{{ teacher.house_number }}">
                </div>
                
                <div class="mks-form-group">
                    <label class="mks-label" for="postal_code">PLZ</label>
                    <input type="text" name="postal_code" id="postal_code" class="mks-input" value="{{ teacher.postal_code }}">
                </div>
                
                <div class="mks-form-group">
                    <label class="mks-label" for="city">Stadt</label>
                    <input type="text" name="city" id="city" class="mks-input" value="{{ teacher.city }}">
                </div>
                
                <div class="mks-form-group">
                    <label class="mks-label" for="country">Land</label>
                    <select name="country" id="country" class="mks-select">
                        <option value="">Kein Land ausgewählt</option>
                        {% for country in countries %}
                        <option value="{{ country.id }}" {% if teacher.country.id == country.id %}selected{% endif %}>
                            {{ country.country }}
                        </option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            
            <!-- Teaching Subjects -->
            <div class="mks-section">
                <h3 class="mks-section-title">
                    <svg class="mks-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                        <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                    </svg>
                    Unterrichtsfächer
                </h3>
                
                <div class="mks-checkbox-group">
                    {% for subject in all_subjects %}
                    <div class="mks-checkbox-item">
                        <input type="checkbox" 
                               name="subjects" 
                               value="{{ subject.id }}" 
                               id="subject_{{ subject.id }}"
                               class="mks-checkbox"
                               {% if subject in teacher.subject.all %}checked{% endif %}>
                        <label for="subject_{{ subject.id }}" class="mks-checkbox-label">
                            {{ subject.subject }}
                        </label>
                    </div>
                    {% endfor %}
                </div>
                <div class="mks-hint">Wählen Sie alle Fächer aus, die der Lehrer unterrichtet</div>
            </div>
            
            <!-- Subject Coordination -->
            <div class="mks-section">
                <h3 class="mks-section-title">
                    <svg class="mks-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
                        <rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect>
                    </svg>
                    Fachbereichsleitung
                </h3>
                
                <div class="mks-checkbox-group">
                    {% for category in subject_categories %}
                    <div class="mks-checkbox-item">
                        <input type="checkbox" 
                               name="subject_coordinators" 
                               value="{{ category.id }}" 
                               id="coordinator_{{ category.id }}"
                               class="mks-checkbox"
                               {% if category in teacher.subject_coordinator.all %}checked{% endif %}>
                        <label for="coordinator_{{ category.id }}" class="mks-checkbox-label">
                            {{ category.name }}
                        </label>
                    </div>
                    {% endfor %}
                </div>
                <div class="mks-hint">Fachbereiche, für die der Lehrer verantwortlich ist</div>
            </div>
            
            <!-- Banking Information -->
            <div class="mks-section">
                <h3 class="mks-section-title">
                    <svg class="mks-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                        <line x1="1" y1="10" x2="23" y2="10"></line>
                    </svg>
                    Bankdaten
                </h3>
                
                <div class="mks-form-group">
                    <label class="mks-label" for="iban">IBAN</label>
                    <input type="text" name="iban" id="iban" class="mks-input" value="{{ teacher.iban }}">
                    <div class="mks-hint">Format: AT####################</div>
                </div>
                
                <div class="mks-form-group">
                    <label class="mks-label" for="bic">BIC</label>
                    <input type="text" name="bic" id="bic" class="mks-input" value="{{ teacher.bic }}">
                    <div class="mks-hint">Bank Identifier Code</div>
                </div>
                
                <div class="mks-form-group">
                    <label class="mks-label" for="social_security">Sozialversicherungsnummer</label>
                    <input type="text" name="social_security" id="social_security" class="mks-input" value="{{ teacher.socialSecurityField }}">
                    <div class="mks-hint">Österreichische SV-Nummer</div>
                </div>
            </div>
            
            <!-- Biography -->
            <div class="mks-section mks-full-width">
                <h3 class="mks-section-title">
                    <svg class="mks-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                        <polyline points="14,2 14,8 20,8"></polyline>
                        <line x1="16" y1="13" x2="8" y2="13"></line>
                        <line x1="16" y1="17" x2="8" y2="17"></line>
                    </svg>
                    Biografie
                </h3>
                
                <div class="mks-form-group">
                    <label class="mks-label" for="bio">Lebenslauf und beruflicher Werdegang</label>
                    <textarea name="bio" id="bio" class="mks-textarea">{{ teacher.bio }}</textarea>
                    <div class="mks-hint">Diese Information wird auf der öffentlichen Website angezeigt</div>
                </div>
                
                <div class="mks-form-group">
                    <label class="mks-label" for="youtube_id_one">YouTube Video ID 1</label>
                    <input type="text" name="youtube_id_one" id="youtube_id_one" class="mks-input" value="{{ teacher.youtube_id_one }}">
                    <div class="mks-hint">Nur die Video-ID aus der YouTube-URL</div>
                </div>
                
                <div class="mks-form-group">
                    <label class="mks-label" for="youtube_id_two">YouTube Video ID 2</label>
                    <input type="text" name="youtube_id_two" id="youtube_id_two" class="mks-input" value="{{ teacher.youtube_id_two }}">
                    <div class="mks-hint">Nur die Video-ID aus der YouTube-URL</div>
                </div>
            </div>
        </form>
        
        <!-- Actions -->
        <div class="mks-actions">
            <div class="mks-btn-group">
                <button type="submit" form="teacher-form" class="mks-btn mks-btn-primary" id="save-btn">
                    <svg class="mks-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                        <polyline points="17,21 17,13 7,13 7,21"></polyline>
                        <polyline points="7,3 7,8 15,8"></polyline>
                    </svg>
                    Speichern
                </button>
                <a href="{% url 'controlling:teacher_detail' teacher.id %}" class="mks-btn">
                    <svg class="mks-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5"></path>
                        <path d="M12 19l-7-7 7-7"></path>
                    </svg>
                    Abbrechen
                </a>
            </div>
            
            <button type="button" class="mks-btn mks-btn-danger" onclick="confirmDelete()">
                <svg class="mks-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="3,6 5,6 21,6"></polyline>
                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                </svg>
                Lehrer löschen
            </button>
        </div>
    </div>

    <script>
        // Auto-resize textarea
        const textarea = document.getElementById('bio');
        if (textarea) {
            function resizeTextarea() {
                textarea.style.height = 'auto';
                textarea.style.height = textarea.scrollHeight + 'px';
            }
            
            textarea.addEventListener('input', resizeTextarea);
            resizeTextarea();
        }
        
        // Form validation
        const form = document.getElementById('teacher-form');
        const saveBtn = document.getElementById('save-btn');
        
        form.addEventListener('submit', function() {
            saveBtn.innerHTML = '<svg class="mks-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"></circle><path d="M12 1v6m0 6v6m11-7h-6m-6 0H1"></path></svg> Speichern...';
            saveBtn.disabled = true;
        });
        
        // Delete confirmation
        function confirmDelete() {
            if (confirm('Sind Sie sicher, dass Sie diesen Lehrer löschen möchten? Diese Aktion kann nicht rückgängig gemacht werden.')) {
                // Create delete form
                const form = document.createElement('form');
                form.method = 'POST';
                form.action = '{% url "controlling:teacher_delete" teacher.id %}';
                
                const csrfToken = document.createElement('input');
                csrfToken.type = 'hidden';
                csrfToken.name = 'csrfmiddlewaretoken';
                csrfToken.value = '{{ csrf_token }}';
                
                form.appendChild(csrfToken);
                document.body.appendChild(form);
                form.submit();
            }
        }
        
        // Real-time validation
        const inputs = document.querySelectorAll('.mks-input, .mks-textarea, .mks-select');
        inputs.forEach(input => {
            input.addEventListener('blur', function() {
                if (this.hasAttribute('required') && !this.value.trim()) {
                    this.style.borderColor = '#dc2626';
                } else if (this.type === 'email' && this.value && !this.value.includes('@')) {
                    this.style.borderColor = '#dc2626';
                } else if (this.value) {
                    this.style.borderColor = '#10b981';
                } else {
                    this.style.borderColor = '#d1d5db';
                }
            });
        });
    </script>
</body>
</html>
